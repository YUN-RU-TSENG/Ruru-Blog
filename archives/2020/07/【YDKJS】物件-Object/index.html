<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>ã€ YDKJS ã€‘ Object (ç­†è¨˜ç‰ˆ) Â· Ruru-Front-End-Blog</title><meta name="description" content="ã€ YDKJS ã€‘ Object (ç­†è¨˜ç‰ˆ) - [object Object]"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../favicons.jpg"><link rel="stylesheet" href="../../../../css/hermes.css"><link rel="search" type="application/opensearchdescription+xml" href="https://github.com/YUN-RU-TSENG/atom.xml" title="Ruru-Front-End-Blog"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="atom.xml" title="Ruru-Front-End-Blog" type="application/atom+xml"></head><body><div class="wrap"><header><a class="logo-link" href="../../../../index.html"><img src="../../../../favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="../../../../index.html" target="_self">BLOG</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../../https:/github.com/YUN-RU-TSENG" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../" target="_self">ARCHIVE</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../../https:/mail.google.com/mail/u/0/#inbox?compose=CllgCJTJnslxNqjBDkxGtdSVcGzcSZCczzVSQlprTXfFvBvLQZcwtWnCKxDchvrXJXKtWlzJLtL" target="_blank">FEED</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ã€ YDKJS ã€‘ Object (ç­†è¨˜ç‰ˆ)</h1><div class="post-info">Jul 16, 2020</div><div class="post-content"><h4 id="ğŸ™ğŸ™ğŸ™-nbsp-nbsp-é–±è®€é ˆçŸ¥"><a href="#ğŸ™ğŸ™ğŸ™-nbsp-nbsp-é–±è®€é ˆçŸ¥" class="headerlink" title="ğŸ™ğŸ™ğŸ™ &nbsp; &nbsp; é–±è®€é ˆçŸ¥"></a>ğŸ™ğŸ™ğŸ™ &nbsp; &nbsp; é–±è®€é ˆçŸ¥</h4><p>æœ¬æ–‡ç‚ºç­†è€…é–±è®€ <strong>You Donâ€™t Know JavaScript</strong> ç³»åˆ—æ™‚çš„å¿ƒå¾—ï¼Œæœ‰é‘’æ–¼æ—¥ç›Šåš´é‡çš„å¥å¿˜å•é¡Œï¼Œä¹Ÿæ²’æœ‰éŒ¢å¯ä»¥è²·éŠ€æè­·é«”ï¼Œä¾¿é–‹å§‹äº† <del>å¤§æŠ„</del> ç­†è¨˜æ•´ç†çš„è¡Œå‹• ğŸƒï¼Œä¸»è¦æœƒå°æ›¸ä¸­å…§å®¹é€²è¡Œå¿ƒå¾—æ•´ç†ã€ç´€éŒ„ä¸€äº›ç•¶ä¸‹é‡åˆ°çš„ç¥ç§˜å•é¡Œã€‚æ­¡è¿ä¸€èµ·è¨è«–äº¤æµï¼Œæœ‰ä»»ä½•éŒ¯èª¤ä¹Ÿè«‹å„ä½å¤§å¤§ä¸åé­ç¬ï¼Œå°èœé›ä¸æ…æ„Ÿæ¿€ ğŸ™‡ã€‚</p><p><a href="https://www.animatedimages.org/cat-frogs-198.htm" target="_blank" rel="noopener"><img src="https://www.animatedimages.org/data/media/198/animated-frog-image-0204.gif" border="0" alt="animated-frog-image-0204"></a></p><hr><h1 id="ğŸ”–-nbsp-Objectï¼Œä½ å¥½"><a href="#ğŸ”–-nbsp-Objectï¼Œä½ å¥½" class="headerlink" title="ğŸ”–&nbsp; Objectï¼Œä½ å¥½"></a>ğŸ”–&nbsp; <code>Object</code>ï¼Œä½ å¥½</h1><p>Javascript ä¸­ï¼Œ<code>Object</code>ä¾ç…§ä¾†æºå¯ä»¥å€åˆ†ç‚ºï¼š</p><img src="./screenshot 2020-07-16 20.58.24.jpg"><ol><li>å®¿ä¸»ç‰©ä»¶ï¼šç”±å®¿ä¸»ç’°å¢ƒæä¾›çš„<code>Object</code> <em>object supplied by the host environment to complete the execution environment of ECMAScript</em></li><li>åŸç”Ÿç‰©ä»¶ï¼šç”± ECMAScript å¯¦ç¾æä¾›ï¼Œä¸åŒ…å«å®¿ä¸»ç’°å¢ƒå®šç¾©çš„<code>Object</code>ã€‚ <em>object in an ECMAScript implementation whose semantics are fully defined by this specification rather than by the host environment</em></li></ol><ul><li>åŒ…å«å…§ç½®ç‰©ä»¶ï¼šDateã€String â€¦</li></ul><h2 id="å®¿ä¸»ç‰©ä»¶"><a href="#å®¿ä¸»ç‰©ä»¶" class="headerlink" title="å®¿ä¸»ç‰©ä»¶"></a>å®¿ä¸»ç‰©ä»¶</h2><p>å‰›å‰›æœ‰èªªåˆ° <strong>å®¿ä¸»ç‰©ä»¶</strong> æ˜¯ç”± <strong>å®¿ä¸»ç’°å¢ƒ</strong> æä¾›çš„ç‰©ä»¶ï¼Œé‚£éº¼ä»€éº¼æ˜¯ <strong>å®¿ä¸»ç’°å¢ƒ</strong> å‘¢ï¼Ÿ</p><p>æˆ‘å€‘ç¾åœ¨æ‰€æ’°å¯«çš„ JavaScript ï¼Œéœ€è¦é€éå®¿ä¸»ç’°å¢ƒï¼ˆç€è¦½å™¨ã€Nodeï¼‰åŸ·è¡Œï¼Œä»¥ç€è¦½å™¨ä¾†èªªï¼šæ¯”å¦‚æˆ‘å€‘å¸¸ç”¨çš„ Chromeã€Safari ç­‰ï¼Œéƒ½æ˜¯å¯ä»¥ä½¿ JavaScript é‹è¡Œçš„ç’°å¢ƒï¼Œé€™ä¾¿è¢«ç¨±ç‚º <strong>å®¿ä¸»ç’°å¢ƒ</strong>ï¼Œä¸€å€‹é‹ä½œ Javascript è…³æœ¬çš„ç’°å¢ƒï¼Œè€Œå®¿ä¸»ç’°å¢ƒå¦‚ä»Šä¹Ÿä¸åƒ…åƒ…åªæœ‰ç€è¦½å™¨ï¼ŒNode ä¹Ÿå¯ä»¥ä½œç‚ºå®¿ä¸»ç’°å¢ƒï¼Œå¤§å¤§æå‡äº† Javascript å¯è¢«æ‡‰ç”¨çš„å ´åˆã€‚</p><h4 id="å®¿ä¸»ç’°å¢ƒä¸­çš„-Objectï¼š"><a href="#å®¿ä¸»ç’°å¢ƒä¸­çš„-Objectï¼š" class="headerlink" title="å®¿ä¸»ç’°å¢ƒä¸­çš„ Objectï¼š"></a>å®¿ä¸»ç’°å¢ƒä¸­çš„ <code>Object</code>ï¼š</h4><p>è¦ç¯„ä¸­ <a href="http://ecma-international.org/ecma-262/5.1/#sec-4.1" target="_blank" rel="noopener">4.1</a> æœ‰å¦‚æ­¤æåˆ°ï¼š</p><blockquote><p>A web browser provides an ECMAScript host environment for client-side computation including, for instance, objects that represent windows, menus, pop-ups, dialog boxes, text areas, anchors, frames, history, cookies, and input/output. Further, the host environment provides a means to attach scripting code to events such as change of focus, page and image loading, unloading, error and abort, selection, form submission, and mouse actions. Scripting code appears within the HTML and the displayed page is a combination of user interface elements and fixed and computed text and images. The scripting code is reactive to user interaction and there is no need for a main program.</p></blockquote><p>ä¸Šé¢çš„æ„æ€æåˆ°äº†ç€è¦½å™¨ç’°å¢ƒæä¾›çš„å®¿ä¸»ç‰©ä»¶ï¼Œå¯ä»¥ç†è§£ç‚ºï¼Œå®¿ä¸»ç’°å¢ƒé€šå¸¸æœƒè—‰ç”±æä¾›ç‰¹åˆ¥çš„ <code>Object</code> ä½¿ JavaScript å¯ä»¥è—‰ç”±æ“ä½œé€™äº› <code>Object</code> å¾—ä»¥ä½¿ç”¨å®¿ä¸»ç’°å¢ƒæ‰€æä¾›çš„åŠŸèƒ½ã€‚</p><p>ä»¥ç€è¦½å™¨ä¾†èªªï¼š</p><p>è«¸å¦‚æˆ‘å€‘å¸¸ç”¨çš„ <code>document</code>ã€<code>window</code>ã€<code>cookie</code> ç­‰ç€è¦½å™¨ä¸­æä¾›ä¸­çš„é€™äº› <code>Object</code> ä¾¿æ˜¯æˆ‘å€‘å¸¸æœƒç”¨åˆ°çš„å®¿ä¸»ç‰©ä»¶ï¼Œä½¿å¾— JavaScript å¯ä»¥è—‰ç”±æ“ä½œé€™äº›å®¿ä¸»ç‰©ä»¶è™•ç†ç€è¦½å™¨æ‰€æä¾›çš„åŠŸèƒ½ï¼Œè«¸å¦‚é»æ“ŠæŒ‰éˆ•å¾Œæ›´æ›ä¸»é¡Œè‰²ã€æš«å­˜ç¶²é è³‡æ–™ã€‚</p><p>JavaScript åœ¨ç€è¦½å™¨ä¸­å¯ä»¥ä½¿ç”¨ç€è¦½å™¨æ‰€æä¾›çš„ Web apiï¼Œä¾†é€²è¡Œå¸¸ç”¨çš„ DOMã€Cookie ç­‰æ“ä½œï¼Œèˆ‡ Event é€£ç”¨ï¼Œä¾¿å¯ä»¥èˆ‡ç”¨æˆ¶äº¤äº’ï¼Œèˆ‰ä¾‹ä¾†èªªä»¥ä¸‹ç‚ºå¸¸è¦‹çš„ç€è¦½å™¨ <strong>å®¿ä¸»ç‰©ä»¶</strong>ï¼š</p><ul><li>â˜&nbsp; document å¯ä»¥è—‰ç”±å®ƒæ‰€æä¾›çš„è«¸å¤šå±¬æ€§ï¼Œæ“ä½œæœ‰é—œ Dom çš„ç›¸é—œåŠŸèƒ½ã€‚</li><li>â˜&nbsp; console ä½ çŸ¥é“çš„ã€‚</li><li>â˜&nbsp; localStorage å¯ä»¥ç”¨ä¾†æ“ä½œç€è¦½å™¨çš„æœ¬åœ°å­˜å–åŠŸèƒ½ï¼Œå¸¸è¦‹å¦‚ sessionStorageã€localStorageã€‚</li></ul><img src="./screenshot 2020-07-16 17.11.07.jpg"><p>å¯ä»¥æƒ³åƒ Javascript åœ¨ç€è¦½å™¨ä¸­é‹è¡Œï¼Œä¾¿å¯ä»¥ä½¿ç”¨è©²å®¿ä¸»ç’°å¢ƒæ‰€æä¾›çš„ <code>Object</code>ã€‚<br><br></p><img src="./screenshot 2020-07-16 18.14.09.jpg"> è‹¥æ˜¯åœ¨å…¶ä»–å®¿ä¸»ç’°å¢ƒï¼Œä¾¿æœƒæœ‰ä¸åŒçš„å®¿ä¸»ç‰©ä»¶å¯ä»¥ä½¿ç”¨ã€‚<hr><h2 id="åŸç”Ÿç‰©ä»¶ï¼š"><a href="#åŸç”Ÿç‰©ä»¶ï¼š" class="headerlink" title="åŸç”Ÿç‰©ä»¶ï¼š"></a>åŸç”Ÿç‰©ä»¶ï¼š</h2><p>èªªå› YDKJS çš„å…§å®¹ï¼ŒåŸç”Ÿç‰©ä»¶ä¾¿æ˜¯ç”± ECMAScript æ‰€å®šç¾©çš„ç‰©ä»¶ï¼Œå¹³æ™‚æˆ‘å€‘ä½¿ç”¨ <code>{}</code> å­—é¢å€¼ã€<code>new Object()</code> ç­‰æ–¹å¼å‰µå»ºçš„ç‰©ä»¶ä¾¿æ˜¯åŸç”Ÿç‰©ä»¶çš„ä¸€ç¨®ï¼Œè€Œå…§ç½®ç‰©ä»¶ä¹Ÿå±¬æ–¼åŸç”Ÿç‰©ä»¶ï¼Œå¦‚ Dateã€String ç­‰å±¬æ–¼æ­¤ç¯„ç–‡ã€‚</p><h4 id="å»ºç«‹ç‰©ä»¶çš„æ–¹æ³•ä¸€å…±æœ‰å…©ç¨®ï¼š"><a href="#å»ºç«‹ç‰©ä»¶çš„æ–¹æ³•ä¸€å…±æœ‰å…©ç¨®ï¼š" class="headerlink" title="å»ºç«‹ç‰©ä»¶çš„æ–¹æ³•ä¸€å…±æœ‰å…©ç¨®ï¼š"></a>å»ºç«‹ç‰©ä»¶çš„æ–¹æ³•ä¸€å…±æœ‰å…©ç¨®ï¼š</h4><img src="./screenshot 2020-07-16 23.42.11.jpg"><ol><li><code>{}</code> å­—é¢å€¼</li><li>new Object()</li></ol><p>å­—é¢å€¼å»ºç«‹ç‰©ä»¶æ›´ç‚ºç›´è§€ï¼Œå¯ä»¥æ¸…æ™°åœ°çœ‹è¦‹ç‰©ä»¶çµæ§‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  name: <span class="string">"Henry"</span>,</span><br><span class="line">  sex: <span class="string">"man"</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å»ºæ§‹å¼å»ºç«‹ç‰©ä»¶å‰‡æœ‰ä¸€é …æ˜é¡¯çš„ç¼ºé»ï¼Œä¾¿æ˜¯å¾—è¦ <span style="color:#fc766a;font-weight:700">ä¸€å€‹ä¸€å€‹æ–°å¢æ•¸å€¼</span>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="comment">// æ–°å¢ name</span></span><br><span class="line">a.name = <span class="string">"Henry"</span>;</span><br><span class="line"><span class="comment">// æ–°å¢ man</span></span><br><span class="line">a.sex = <span class="string">"man"</span>;</span><br></pre></td></tr></table></figure><h4 id="é‚£éº¼ï¼Œnew-Object-ä»¥åŠ-éƒ½å¯ä»¥ç”Ÿæˆç‰©ä»¶ï¼Œåˆ°åº•è©²ä½¿ç”¨å“ªå€‹å‘¢ï¼Ÿ"><a href="#é‚£éº¼ï¼Œnew-Object-ä»¥åŠ-éƒ½å¯ä»¥ç”Ÿæˆç‰©ä»¶ï¼Œåˆ°åº•è©²ä½¿ç”¨å“ªå€‹å‘¢ï¼Ÿ" class="headerlink" title="é‚£éº¼ï¼Œnew Object ä»¥åŠ {} éƒ½å¯ä»¥ç”Ÿæˆç‰©ä»¶ï¼Œåˆ°åº•è©²ä½¿ç”¨å“ªå€‹å‘¢ï¼Ÿ"></a>é‚£éº¼ï¼Œnew Object ä»¥åŠ {} éƒ½å¯ä»¥ç”Ÿæˆç‰©ä»¶ï¼Œåˆ°åº•è©²ä½¿ç”¨å“ªå€‹å‘¢ï¼Ÿ</h4><p>ç­”æ¡ˆç•¶ç„¶æ˜¯ <code>{}</code> ï¼Œå› ç‚º <code>{}</code> æ›´ç‚ºç›´è§€ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ ¹æ“šé€™ä¸€ç¯‡ stackoverflow æ‰€æåˆ°çš„å•é¡Œ:</p><p><a href="https://stackoverflow.com/questions/4597926/what-is-the-difference-between-new-object-and-object-literal-notation" target="_blank" rel="noopener">What is the difference between <code>new Object()</code> and object literal notation?</a></p><p>å…¶å¯¦å¯ä»¥ç™¼ç¾è¿‘å…©è€…åœ¨åŸ·è¡Œé€Ÿç‡ä¸Šæœ‰äº›è¨±çš„å·®ç•°ï¼š</p><p>ä½¿ç”¨ <code>console.time</code> ä¾†æ¯”è¼ƒ <code>{}</code> ä»¥åŠ <code>new Object</code> ç”Ÿæˆç‰©ä»¶ï¼Œä»¥ä¸‹ç‚ºæ¯”è¼ƒç”Ÿæˆ <code>100000000</code> å€‹ <code>{}</code> ä»¥åŠ <code>10000000</code> å€‹ <code>new Object()</code> çš„å·®ç•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.time(<span class="string">"using&#123;&#125;"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100000000</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"using&#123;&#125;"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">"using new"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100000000</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"using new"</span>);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ç‚ºåŸ·è¡Œçµæœï¼š</p><ol><li>{} éœ€è¦ 1095 æ¯«ç§’</li><li>new Object éœ€è¦ 1205 æ¯«ç§’</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Testing Object:</span><br><span class="line">using&#123;&#125;: 1095.606201171875ms</span><br><span class="line">using new: 1205.525146484375ms</span><br></pre></td></tr></table></figure><p>æ ¹æ“š <a href="https://stackoverflow.com/questions/7375120/why-is-arr-faster-than-arr-new-array" target="_blank" rel="noopener">Why is arr = [] faster than arr = new Array?</a> çš„è§£é‡‹ï¼Œå¯ä»¥çœ‹åˆ°æœ‰äººå¾ token ç·¨è­¯æ–¹å‘å»æ¯”è¼ƒå…©è€…çš„å·®ç•°ï¼Œä½¿ç”¨ <code>{}</code> å¯ä»¥æ¸›å°‘éœ€è¦èŠ±è²»é¡å¤–çš„ CPU ä¾†ç¢ºå®š new Object çš„æ“ä½œï¼Œä¸éé‡å°é€™æ®µï¼Œç”±æ–¼å°æ–¼ç·¨è­¯ä»£ç¢¼çš„ä¸ç†Ÿæ‚‰ï¼Œæ–¼æ˜¯æš«æ™‚ç­†è¨˜ä¸‹ä¾†ï¼Œä¹‹å¾Œå†å›é¡§æª¢è¨ã€‚</p><blockquote><p>çµè«–ï¼š <code>{}</code> å¯ä»¥æ›´ç›´è§€ã€æ›´å¿«æ·çš„ç”Ÿæˆæ–°çš„ç‰©ä»¶</p></blockquote><p><strong>ğŸ’Š &nbsp; ç­‰å¾…ç­†è¨˜ã€é–±è®€çš„ç›¸é—œè³‡æº</strong><br><a href="https://stackoverflow.com/questions/7375120/why-is-arr-faster-than-arr-new-array" target="_blank" rel="noopener">Why is arr = [] faster than arr = new Array?</a></p><hr><h4 id="è£œå……ç·¨è­¯-bytecode-æ¯”è¼ƒå·®ç•°çš„æ–¹æ³•ï¼š"><a href="#è£œå……ç·¨è­¯-bytecode-æ¯”è¼ƒå·®ç•°çš„æ–¹æ³•ï¼š" class="headerlink" title="è£œå……ç·¨è­¯ bytecode æ¯”è¼ƒå·®ç•°çš„æ–¹æ³•ï¼š"></a>è£œå……ç·¨è­¯ bytecode æ¯”è¼ƒå·®ç•°çš„æ–¹æ³•ï¼š</h4><p>å»ºç«‹ <code>{}.js</code> ä»¥åŠ <code>constructor.js</code> å…©è€…åˆ†åˆ¥è£è¼‰äº†ä»¥ä¸‹å…§å®¹ï¼š</p><h4 id="åŒ…å«"><a href="#åŒ…å«" class="headerlink" title="{} åŒ…å«"></a>{} åŒ…å«</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="å»ºæ§‹å¼-åŒ…å«"><a href="#å»ºæ§‹å¼-åŒ…å«" class="headerlink" title="å»ºæ§‹å¼ åŒ…å«"></a>å»ºæ§‹å¼ åŒ…å«</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Object</span>();</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <strong>node</strong> <code>node --print-bytecode è¦ç·¨è­¯çš„æª”æ¡ˆ.js &gt; è¦è¼¸å‡ºçš„ bytecode çµæœ.txt</code> æŸ¥çœ‹å…©è€…çš„ç·¨è­¯çµæœï¼Œçµæœä¸Šå…©è€…ä¸¦éå®Œå…¨ç›¸åŒï¼Œä½¿ç”¨ diff æ¯”è¼ƒå…©è€…æ˜¯æœ‰å·®ç•°çš„ã€‚ä¸éé€™ä¸€éƒ¨ä»½ç›®å‰ä¸ç¢ºå®šçš„å¾ˆå¤šï¼Œé¦–å…ˆ bytecode æˆ‘ä¸å¤ªæœƒçœ‹ï¼Œæ‰€ä»¥å…ˆç•¶æˆä¸€å€‹ç–‘æƒ‘ï¼Œç•™è‘—ä»¥å¾Œæ·±å…¥ç­†è¨˜ã€‚</p><p><strong>ğŸ’Š &nbsp; ç­‰å¾…ç­†è¨˜ã€é–±è®€çš„ç›¸é—œè³‡æº</strong><br><a href="https://github.com/aszx87410/blog/issues/54">å¾ V8 bytecode çœ‹ let èˆ‡ var çš„æ•ˆèƒ½å•é¡Œ<br>#54</a></p><hr><h2 id="å…§ç½®ç‰©ä»¶ï¼š"><a href="#å…§ç½®ç‰©ä»¶ï¼š" class="headerlink" title="å…§ç½®ç‰©ä»¶ï¼š"></a>å…§ç½®ç‰©ä»¶ï¼š</h2><p>å‰›ä»‹ç´¹å®Œäº†åŸç”Ÿç‰©ä»¶ï¼ŒJavascript åŸç”Ÿç‰©ä»¶ä¸­é‚„åŒ…å«äº†å…§ç½®ç‰©ä»¶ï¼Œåœ¨ Javascript é–‹å§‹åŸ·è¡Œå¾Œï¼Œä¾¿æœƒå­˜åœ¨æ–¼ç’°å¢ƒä¸­å¯ä¾›ä½¿ç”¨ï¼Œå…¶ä¸­ä¸‹åˆ—å¸¸è¦‹çš„åŸºæœ¬é¡åˆ¥æœ‰å„è‡ªå°æ‡‰çš„å…§ç½®ç‰©ä»¶åç¨±ï¼š</p><ul><li>String</li><li>Number</li><li>Boolean</li><li>Object</li><li>Function</li><li>Array</li><li>Date</li><li>RegExp</li><li>Error</li></ul><p>ä»¥ä¸Šçš„å…§ç½®ç‰©ä»¶çš†ç‚ºå‡½å¼ï¼Œå¯ä»¥é€éå»ºæ§‹å‡½å¼æ–¹å¼å‘¼å«ï¼Œç”±æ–¼ JS åŸå‹ç¹¼æ‰¿çš„è¨­è¨ˆï¼Œæ¯å€‹æ§‹é€ å™¨å‡½å¼çš„ prototype å°‡è¢«ç”Ÿæˆçš„ç‰©ä»¶éš±å¼çš„å¼•ç”¨ï¼Œé€™éƒ¨åˆ†ä¹‹å¾Œæœƒè©³ç´°èªªæ˜ï¼Œä¸éå¯ä»¥å…ˆçœ‹ä¸‹æ®µ ECMA ä¸­çš„ä»‹ç´¹ï¼š</p><blockquote><p>Every object created by a constructor has an implicit reference (called the objectâ€™s prototype) to the value of its constructorâ€™s â€œprototypeâ€ property. Furthermore, a prototype may have a non-null implicit reference to its prototype, and so on; this is called the prototype chain. When a reference is made to a property in an object, that reference is to the property of that name in the first object in the prototype chain that contains a property of that name. In other words, first the object mentioned directly is examined for such a property; if that object contains the named property, that is the property to which the reference refers; if that object does not contain the named property, the prototype for that object is examined next; and so on</p></blockquote><h4 id="Javascript-ä¸­çš„å»ºæ§‹å­ï¼š"><a href="#Javascript-ä¸­çš„å»ºæ§‹å­ï¼š" class="headerlink" title="Javascript ä¸­çš„å»ºæ§‹å­ï¼š"></a>Javascript ä¸­çš„å»ºæ§‹å­ï¼š</h4><p>ç°¡å–®ä¾†èªªï¼ŒJavascript æ²’æœ‰ class çš„è¨­è¨ˆï¼Œç”±æ–¼ç•¶åˆåªæ˜¯ä¸€å€‹ç°¡å–®è¨­è¨ˆçš„è…³æœ¬èªè¨€ï¼Œæ‰€ä»¥è¨­è¨ˆè€…è¨­è¨ˆäº†å»ºæ§‹å­ï¼ˆæ“æœ‰ prototype çš„å‡½å¼ï¼Œé€é new è¡¨é”å¼ç”Ÿæˆå°è±¡ï¼‰è®“ç”Ÿæˆçš„ç‰©ä»¶å¾—ä»¥éš±æ€§çš„å¼•ç”¨é€£çµå»ºæ§‹å¼çš„ prototypeï¼Œä¾¿å¯ä»¥é”æˆå±¬æ€§å…±äº«ã€åŸå‹ç¹¼æ‰¿çš„åŠŸèƒ½ã€‚</p><img src="./screenshot 2020-07-17 11.28.44.jpg"><p>ä»¥ä¸Šåœ–ä¾†èªªï¼Œå»ºæ§‹å­ç”Ÿæˆ A1ã€A2ã€A3 ä¸‰å€‹ç‰©ä»¶ï¼Œæ¯å€‹ç‰©ä»¶éƒ½æœ‰å„è‡ªçš„å±¬æ€§ï¼š</p><p>é»ƒç·šä»£è¡¨åŸå‹ç¹¼æ‰¿ï¼Œå»ºæ§‹å­æœ¬èº«çš„ <code>p1</code>ã€<code>p2</code> å°æ–¼ <code>prototype</code> ä»¥åŠ <code>A1</code>ã€<code>A2</code>ã€<code>A3</code> æ˜¯ä¸å¯è¦‹çš„ï¼Œç„¶å¾Œä½æ–¼ <code>prototype</code> ä¸­çš„å±¬æ€§ï¼ˆåªè¦ <code>A1</code>ã€<code>A2</code>ã€<code>A3</code> ä¸å«æœ‰è©²å±¬æ€§åï¼Œä¸ç„¶å°±æœƒä»¥ <code>A1</code>ã€<code>A2</code>ã€<code>A3</code> æœ¬èº«çš„è©²å±¬æ€§åå„ªå…ˆï¼‰å¯ä»¥è¢« <code>A1</code>ã€<code>A2</code>ã€<code>A3</code> å…±äº«ã€‚</p><p><strong>æ³¨æ„ï¼Œå»ºæ§‹å­å’Œ <code>prototype</code> æ˜¯æ²’æœ‰éš±æ€§ç¹¼æ‰¿çš„é—œä¿‚çš„ã€‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»ºæ§‹å­</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="function"><span class="keyword">function</span>(<span class="params">a1, a2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.a1 = a1;</span><br><span class="line">    <span class="keyword">this</span>.a2 = a2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»ºæ§‹å­çš„ prototype</span></span><br><span class="line">p.prototype = &#123;</span><br><span class="line">    method1: <span class="string">'...'</span>,</span><br><span class="line">    method2: <span class="string">'...'</span>,</span><br><span class="line">    method3: <span class="string">'...'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ new p å»ºæ§‹çš„ç‰©ä»¶</span></span><br><span class="line"><span class="keyword">var</span> A1 = <span class="keyword">new</span> p(<span class="number">12</span>, <span class="number">22</span>)</span><br><span class="line"><span class="keyword">var</span> A2 = <span class="keyword">new</span> p(<span class="number">3</span>, <span class="number">33</span>)</span><br><span class="line"><span class="keyword">var</span> A3 = <span class="keyword">new</span> p(<span class="number">5</span>, <span class="number">67</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€™äº›ç‰©ä»¶ç¹¼æ‰¿äº† p.prototypeï¼ŒæŒ‡å‘ prototype ä½å€</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(A1) === p.prototype <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(A2) === p.prototype <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(A3) === p.prototype <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">A1.method1 <span class="comment">// '...'</span></span><br><span class="line">p.method1 <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥å¯¦éš›åŸ·è¡Œä¸€æ¬¡ç¨‹å¼ç¢¼ã€‚è¨˜å¾— <code>p</code> å»ºæ§‹å­ä¸æœƒç¹¼æ‰¿è‡ªå·±çš„ <code>prototype</code> å±¬æ€§ï¼Œæ‰€ä»¥ <code>p.method1</code> ä¸¦æ²’æœ‰å€¼ã€‚</p><h2 id="å›åˆ°å…§ç½®ç‰©ä»¶"><a href="#å›åˆ°å…§ç½®ç‰©ä»¶" class="headerlink" title="å›åˆ°å…§ç½®ç‰©ä»¶"></a>å›åˆ°å…§ç½®ç‰©ä»¶</h2><p>çœ‹éä¸Šè¿°å»ºæ§‹å­ä»‹ç´¹å¾Œï¼Œç›¸ä¿¡å¤§å®¶å¯ä»¥çŒœæƒ³åˆ°é€éå»ºæ§‹å­çš„ç‰¹æ€§ï¼ŒJavascript çš„å…§ç½®å»ºæ§‹å­ä¹Ÿæœ‰å®ƒæ‰€å®šç¾©çš„ <code>prototype</code>ï¼Œä¸¦ä¸”ä¹˜è¼‰è‘—å¥½ç”¨çš„å±¬æ€§ï¼Œä¾‹å¦‚ String å»ºæ§‹å­çš„ prototype ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">anchor: Æ’ anchor()</span><br><span class="line">big: Æ’ big()</span><br><span class="line">blink: Æ’ blink()</span><br><span class="line">bold: Æ’ bold()</span><br><span class="line">charAt: Æ’ charAt()</span><br><span class="line">charCodeAt: Æ’ charCodeAt()</span><br><span class="line">codePointAt: Æ’ codePointAt()</span><br><span class="line">concat: Æ’ concat()</span><br><span class="line"><span class="keyword">constructor</span>: Æ’ String()</span><br><span class="line">endsWith: Æ’ endsWith()</span><br><span class="line">fixed: Æ’ fixed()</span><br><span class="line">fontcolor: Æ’ fontcolor()</span><br><span class="line">fontsize: Æ’ fontsize()</span><br><span class="line">includes: Æ’ includes()</span><br><span class="line">indexOf: Æ’ indexOf()</span><br><span class="line">italics: Æ’ italics()</span><br><span class="line">lastIndexOf: Æ’ lastIndexOf()</span><br><span class="line">length: 0</span><br><span class="line">link: Æ’ link()</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>åŒ…å«å¦‚ä¸Šè¨±å¤šå¯ç”¨çš„åŠŸèƒ½ï¼Œå¯ä»¥æŸ¥è©¢ charcodeã€å¯ä»¥æ›´æ›ç‰¹å®šæ–‡å­—ï¼Œåªè¦é€é <code>new String()</code> ç”Ÿæˆçš„ç‰©ä»¶ï¼Œéƒ½å¯ä»¥å› ç‚ºåŸå‹ç¹¼æ‰¿ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é€™äº›æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå¹³æ™‚æˆ‘å€‘æ™‚å¸¸ä½¿ç”¨çš„ <code>&#39;Alice&#39;</code> ç­‰å­—ä¸²ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>&#39;Alice&#39;.chartat()</code> ç­‰æ–¹æ³•ï¼Œç›¸ä¿¡ä½ ä¸€å®šä¸é™Œç”Ÿï¼Œé€™æ˜¯ç”±æ–¼ javascript coercionï¼ˆè½‰å‹ï¼‰ï¼Œåœ¨ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ™‚æœƒä½¿ç”¨å…§éƒ¨æ–¹æ³• toObject(V) å°‡å­—ä¸² <code>&#39;Alice&#39;</code> è½‰å‹æˆç‚º <code>String ç‰©ä»¶</code>ï¼Œæœ‰äººç¨±é€™éç¨‹ç‚º <code>boxing</code> æˆ–æ˜¯æ­¤æ™‚ç‰©ä»¶ç‚º <code>wrapper object</code> ä½†æ˜¯è¦ç¯„ä¸­æ²’æœ‰å‡ºç¾ç›¸é—œé—œéµè©ï¼Œå…¶ç‚ºä¸€å€‹è¨è«–æ­¤æ¦‚å¿µçš„èªªæ³•ã€‚</p><p>ä¸‹é¢ä¾†çœ‹çœ‹è½‰å‹æ™‚æˆ‘å€‘è‡ªè¦ç¯„å¯ä»¥çªºè¦‹ä»€éº¼</p><h4 id="6-2-3-1"><a href="#6-2-3-1" class="headerlink" title="6.2.3.1"></a><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-getvalue" target="_blank" rel="noopener">6.2.3.1</a></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. ReturnIfAbrupt(V).</span><br><span class="line">2. If Type(V) is not Reference, return V.</span><br><span class="line">3. Let base be GetBase(V).</span><br><span class="line">4. If IsUnresolvableReference(V), throw a ReferenceError exception.</span><br><span class="line">5. If IsPropertyReference(V), then.</span><br><span class="line">    a.If HasPrimitiveBase(V) is true, then.</span><br><span class="line">        i. Assert: In this case, base will never be null or undefined.</span><br><span class="line">        ii. Let base be ToObject(base).</span><br><span class="line">    b.Return base.[[Get]](GetReferencedName(V), GetThisValue(V)).</span><br><span class="line">6. Else base must be an Environment Record,</span><br><span class="line">    a.Return base.GetBindingValue(GetReferencedName(V), IsStrictReference(V)) (see 8.1.1).</span><br></pre></td></tr></table></figure><p>ç”±æ­¤æ–¹æ³•æˆ‘å€‘å¯ä»¥çœ‹è¦‹ï¼Œç•¶å‡ºç¾ <code>&#39;Alice&#39;</code>.charat() æ™‚ï¼ŒAlice çš„ reference typeï¼ˆæ­¤ç‚º javascript å…§éƒ¨å±¬æ€§ï¼Œç‚ºä¸€å€‹æŠ½è±¡ instanceï¼Œç•¶ identify è§£æã€å±¬æ€§è¨ªå•éç¨‹ä¸­æœƒå‰µå»ºï¼Œbase ç‚ºå¼•ç”¨åŸºå€¼ã€name ç‚ºå¼•ç”¨åç¨±ã€strict è¡¨ç¤ºæ˜¯å¦ç‚ºåš´æ ¼æ¨¡å¼ï¼š</p><h4 id="reference-ç¤ºæ„"><a href="#reference-ç¤ºæ„" class="headerlink" title="reference ç¤ºæ„"></a>reference ç¤ºæ„</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">base: &#96;&#39;Alice&#39;&#96;</span><br><span class="line">name: charat</span><br><span class="line">strice: false</span><br></pre></td></tr></table></figure><p>å¥—ç”¨åˆ°ä¸Šè¿° a ii. å¯ä»¥çœ‹è¦‹ç•¶ base æ•¸å€¼ç‚ºéç‰©ä»¶çš„åŸºæœ¬å‹åˆ¥ï¼Œæ­¤æ™‚æœƒå°‡ base å€¼é€é toObject(base) è½‰å‹ï¼Œä¸¦ä¸”è¿”å›è½‰å‹å¾ŒæŸ¥æ‰¾åˆ°çš„å±¬æ€§ï¼Œæ•…åœ¨æ­¤ä¾¿å¯ä»¥ä½¿ç”¨åŸºæœ¬å‹åˆ¥ä¾†ä½¿ç”¨å…§éƒ¨å±¬æ€§ã€‚</p><h4 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h4><p><a href="http://perfectionkills.com/know-thy-reference/" target="_blank" rel="noopener">reference</a><br><a href="https://javascriptweblog.wordpress.com/2010/09/27/the-secret-life-of-javascript-primitives/" target="_blank" rel="noopener">The Secret Life of JavaScript Primitives</a></p></div></article></div></main><footer><div class="paginator"><a class="next" href="../%E3%80%90Vue-%E5%88%9D%E6%8E%A2%E3%80%91Vue-instance/">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname="claymcleod",disqus_identifier="archives/2020/07/ã€YDKJSã€‘ç‰©ä»¶-Object/",disqus_title="ã€ YDKJS ã€‘ Object (ç­†è¨˜ç‰ˆ)",disqus_url="https://github.com/YUN-RU-TSENG/archives/2020/07/ã€YDKJSã€‘ç‰©ä»¶-Object/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script><div class="copyright"><p>Â© 2020 ruru-tseng, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/claymcleod/hexo-theme-hermes" target="_blank">hexo-theme-hermes</a>.</p><p>Logo made by <a href="https://www.flaticon.com/authors/freepik" target="_blank" rel="noopener">Freepik</a> from <a href="https://flaticon.com" target="_blank" rel="noopener">www.flaticon.com</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>【 Vue 初探 】Vue instance · Ruru-Front-End-Blog</title><meta name="description" content="【 Vue 初探 】Vue instance - [object Object]"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../favicons.jpg"><link rel="stylesheet" href="../../../../css/hermes.css"><link rel="search" type="application/opensearchdescription+xml" href="https://github.com/YUN-RU-TSENG/atom.xml" title="Ruru-Front-End-Blog"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="atom.xml" title="Ruru-Front-End-Blog" type="application/atom+xml"></head><body><div class="wrap"><header><a class="logo-link" href="../../../../index.html"><img src="../../../../favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="../../../../index.html" target="_self">BLOG</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../../https:/github.com/YUN-RU-TSENG" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../" target="_self">ARCHIVE</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../../https:/mail.google.com/mail/u/0/#inbox?compose=CllgCJTJnslxNqjBDkxGtdSVcGzcSZCczzVSQlprTXfFvBvLQZcwtWnCKxDchvrXJXKtWlzJLtL" target="_blank">FEED</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">【 Vue 初探 】Vue instance</h1><div class="post-info">Jul 11, 2020</div><div class="post-content"><h2 id="本節重點"><a href="#本節重點" class="headerlink" title="本節重點"></a>本節重點</h2><ul><li>Vue instance 是什麼？該如何使用？</li><li>life cycle 生命週期介紹？</li></ul><h1 id="Vue-instance"><a href="#Vue-instance" class="headerlink" title="Vue instance"></a>Vue instance</h1><p>上章節的內容提及 Vue 最初源自 MVVM 設計，在初始版官方文件中提到（V0.11）：</p><p><strong>M</strong> - 由 JS 物件、基本資料物件構成。<br><strong>V</strong> - 由 Vue instance 所控制的 DOM，通常為我們所編譯的 <code>template</code>。<br><strong>VM</strong> - 同步 V 與 M 的 ViewModel 由 Vue instance 擔任。</p><p>透過 Vue instance，可以同步 View 以及 Model。這一章節會討論到如何建立 Vue instance，以及如何使用。</p><h2 id="Vue-instance-建立方式："><a href="#Vue-instance-建立方式：" class="headerlink" title="Vue instance 建立方式："></a>Vue instance 建立方式：</h2><p>根 Vue instance 透過 <code>new Vue</code> 建構式生成，該方式所填入的 <code>options</code> 物件才能使用 <code>el</code> 選項。在 Vue 中每一個組件也都是一個 instance，透過嵌套的方式層層疊疊的形成組件樹。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="comment">/* options */</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="Vue-instance-options-object"><a href="#Vue-instance-options-object" class="headerlink" title="Vue instance options object"></a>Vue instance options object</h2><blockquote><p>可查閱官方文件 <a href="https://cn.vuejs.org/v2/api/#el" target="_blank" rel="noopener">vuejs.org</a></p></blockquote><p>每個 Vue instance 可以在創建時傳入 <code>options</code> 物件，為一選項物件包含 Vue instance 掛載的 DOM 位置、Data、mixin、生命週期回調訊息等，常用的選項屬性有：</p><h4 id="🧤-options-DOM：el"><a href="#🧤-options-DOM：el" class="headerlink" title="🧤 options/DOM：el"></a>🧤 options/DOM：el</h4><p>類型：String | Element<br>限制：只在使用 <code>new</code> 建構式創建的 instance 創建時有效<br>用途：提供一個實際存在的 DOM 元素作為 Vue instance 掛載的目標，可以填入 CSS 選擇器、HTMLElement。所選擇的 el 元素在掛載後會完全被替換，因此不推薦掛在 <code>html</code> 或 <code>body</code> 上。</p><h4 id="掛載範例："><a href="#掛載範例：" class="headerlink" title="掛載範例："></a>掛載範例：</h4><p>以下方例子來說，<code>div.app</code> 是 Vue instance 掛載的目標，將被 <code>p</code> 模板所替換，所以不建議使用 <code>html</code>、<code>body</code> 作為 Vue instance 掛載目標，這兩個元素將被取代帶來非預期的渲染結果。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span>instance 將掛載的元件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">"#app"</span>,</span></span><br><span class="line"><span class="handlebars"><span class="xml">    template: `<span class="tag">&lt;<span class="name">p</span>&gt;</span>被替換上去的模板<span class="tag">&lt;/<span class="name">p</span>&gt;</span>`,</span></span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="actionscript">  vm.$mount(<span class="string">".app"</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>最初為：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span>instance 將掛載的元件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Vue instance 掛載後，<code>div.app</code> 被替換：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>被替換上去的模板<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="若是不在-root-instance-的-options-中填入-el"><a href="#若是不在-root-instance-的-options-中填入-el" class="headerlink" title="若是不在 root instance 的 options 中填入 el"></a>若是不在 root instance 的 options 中填入 el</h4><p>若是不填入 el，Vue instance 將不會掛載直到手動掛載執行 <a href="https://cn.vuejs.org/v2/api/?#vm-mount" target="_blank" rel="noopener">vm.$mount</a>(‘要掛載的元素’) 後，才會掛載到 el 上。反之，一旦寫了 el，Vue instance 將直接被掛載。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">    template: `<span class="tag">&lt;<span class="name">p</span>&gt;</span>被替換上去的模板<span class="tag">&lt;/<span class="name">p</span>&gt;</span>`,</span></span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="actionscript">  <span class="comment">// 執行到 created 步驟</span></span></span><br><span class="line"><span class="actionscript">  vm.$mount(<span class="string">".app"</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 開始執行 mounted 步驟</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>要觀看 mount 掛載調用的生命週期執行，可使用以下方式，可以觀察到載手動掛載前生命週期鉤子調用到 <code>created</code> vm.$mount 後便將模板掛載到目標元素上，生命週期鉤子調用到 <code>mounted</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">    template: `<span class="tag">&lt;<span class="name">p</span>&gt;</span>被替換上去的模板<span class="tag">&lt;/<span class="name">p</span>&gt;</span>`,</span></span></span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"beforeCreate -&gt; beforeCreate"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">        <span class="string">"在實例初始化之後，資料觀測 (data observer) 和 event/watcher 事件設定之前被呼叫。"</span></span></span><br><span class="line">      );</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"created -&gt; created"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">        <span class="string">"在實例建立完成後被立即呼叫。在這一步，實例已完成以下的設定：資料觀測 (data observer)，property 和方法的運算，watch/event 事件callback。然而，掛載階段還沒開始，$el property 目前尚不可用。"</span></span></span><br><span class="line">      );</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeMount() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"beforeMount -&gt; beforeMount"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"在掛載開始之前被呼叫：相關的 render 函數首次被呼叫。"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"mounted -&gt; mounted"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">        <span class="string">"實例被掛載後呼叫，這時 el 被新建立的 vm.$el 替換了。如果根實例掛載到了一個檔案內的元素上，當 mounted 被呼叫時 vm.$el 也在檔案內。注意 mounted 不會保證所有的子組件也都一起被掛載。如果你希望等到整個視圖都渲染完畢，可以在 mounted 內部使用 vm.$nextTick："</span></span></span><br><span class="line">      );</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeUpdate() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"beforeUpdate -&gt; beforeUpdate"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">        <span class="string">"資料更新時呼叫，發生在虛擬 DOM 打補丁之前。這裡適合在更新之前訪問現有的 DOM，比如手動移除已添加的事件監聽器。"</span></span></span><br><span class="line">      );</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    updated() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"updated -&gt; updated"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">        <span class="string">"由於資料更改導致的虛擬 DOM 重新渲染和打補丁，在這之後會呼叫該鉤子。當這個鉤子被呼叫時，組件 DOM 已經更新，所以你現在可以執行依賴於 DOM 的操作。然而在大多數情況下，你應該避免在此期間更改狀態。如果要相應狀態改變，通常最好使用計算屬性或 watcher 取而代之。"</span></span></span><br><span class="line">      );</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeDestroy() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"beforeDestroy -&gt; beforeDestroy"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"實例銷毀之前呼叫。在這一步，實例仍然完全可用。"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    destroyed() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"destroyed -&gt; destroyed"</span>, destroyed);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">        <span class="string">"實例銷毀後呼叫。該鉤子被呼叫後，對應 Vue 實例的所有指令都被解綁，所有的事件監聽器被移除，所有的子實例也都被銷毀。"</span></span></span><br><span class="line">      );</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="actionscript">  <span class="comment">// 執行到 created 步驟</span></span></span><br><span class="line"><span class="actionscript">  vm.$mount(<span class="string">".app"</span>);</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 開始執行 mounted 步驟</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="danger">在 instance 掛載後，元素可以透過 vm.$el 訪問。 如果存在該 `el` 選項，則 Vue instance 立即進行編譯，否則需要透過 vm.$mount() 綁定。 如果 template 和 render fun 皆不存在，則掛載 DOM 元素的 HTML 會被取出當作模板。</div><h2 id="生命週期"><a href="#生命週期" class="headerlink" title="生命週期"></a>生命週期</h2><p>Vue instance 創建時，會歷經一系列的初始化過程，如設定數據監聽、將模板掛載到目標元素等，在這些步驟執行過程中，你可以時間在特定時間調用 callback 函數去在特定時段添加特定的程式碼。</p><table><thead><tr><th>lifecycle hook</th><th>內容</th><th></th></tr></thead><tbody><tr><td>beforeCreate</td><td>在實例初始化之後，數據觀測 (data observer) 和 event/watcher 事件配置之前被調用。</td><td></td></tr><tr><td>created</td><td>在實例創建完成後被立即調用。在這一步，實例已完成以下的配置：數據觀測 (data observer)，property 和方法的運算，watch/event 事件回調。然而，掛載階段還沒開始， $el property 目前尚不可用。</td><td></td></tr><tr><td>beforeMount</td><td>在掛載開始之前被調用：相關的 render 函數首次被調用。 該鉤子在服務器端渲染期間不被調用。</td><td></td></tr><tr><td>mounted</td><td>實例被掛載後調用，這時 el 被新創建的 vm.$el 替換了。如果根實例掛載到了一個文檔內的元素上，當 mounted 被調用時 vm.$el 也在文檔內。 注意 mounted 不會保證所有的子組件也都一起被掛載。如果你希望等到整個視圖都渲染完畢，可以在 mounted 內部使用 vm.$nextTick</td><td></td></tr><tr><td>beforeUpdate</td><td>數據更新時調用，發生在虛擬 DOM 打補丁之前。這裡適合在更新之前訪問現有的 DOM，比如手動移除已添加的事件監聽器。 該鉤子在服務器端渲染期間不被調用，因為只有初次渲染會在服務端進行。</td><td></td></tr><tr><td>updated</td><td>由於數據更改導致的虛擬 DOM 重新渲染和打補丁，在這之後會調用該鉤子。 當這個鉤子被調用時，組件 DOM 已經更新，所以你現在可以執行依賴於 DOM 的操作。然而在大多數情況下，你應該避免在此期間更改狀態。如果要相應狀態改變，通常最好使用計算屬性或 watcher 取而代之。 注意 updated 不會保證所有的子組件也都一起被重繪。如果你希望等到整個視圖都重繪完畢，可以在 updated 裡使用 vm.$nextTick</td><td></td></tr><tr><td>beforeDestroy</td><td>實例銷毀之前調用。在這一步，實例仍然完全可用。</td><td></td></tr><tr><td>destroyed</td><td>實例銷毀後調用。該鉤子被調用後，對應 Vue 實例的所有指令都被解綁，所有的事件監聽器被移除，所有的子實例也都被銷毀。</td><td></td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">".app"</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line">          num: 123,</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="handlebars"><span class="xml">        template: `<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><span class="template-variable">&#123;&#123; num &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span>`,</span></span></span><br><span class="line">        beforeCreate() &#123;</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"beforeCreate -&gt; beforeCreate"</span>);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">            <span class="string">"在實例初始化之後，資料觀測 (data observer) 和 event/watcher 事件設定之前被呼叫。"</span></span></span><br><span class="line">          );</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">        &#125;,</span><br><span class="line">        created() &#123;</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"created -&gt; created"</span>);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">            <span class="string">"在實例建立完成後被立即呼叫。在這一步，實例已完成以下的設定：資料觀測 (data observer)，property 和方法的運算，watch/event 事件callback。然而，掛載階段還沒開始，$el property 目前尚不可用。"</span></span></span><br><span class="line">          );</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">        &#125;,</span><br><span class="line">        beforeMount() &#123;</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"beforeMount -&gt; beforeMount"</span>);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"在掛載開始之前被呼叫：相關的 render 函數首次被呼叫。"</span>);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">        &#125;,</span><br><span class="line">        mounted() &#123;</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"mounted -&gt; mounted"</span>);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">            <span class="string">"實例被掛載後呼叫，這時 el 被新建立的 vm.$el 替換了。如果根實例掛載到了一個檔案內的元素上，當 mounted 被呼叫時 vm.$el 也在檔案內。注意 mounted 不會保證所有的子組件也都一起被掛載。如果你希望等到整個視圖都渲染完畢，可以在 mounted 內部使用 vm.$nextTick："</span></span></span><br><span class="line">          );</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">        &#125;,</span><br><span class="line">        beforeUpdate() &#123;</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"beforeUpdate -&gt; beforeUpdate"</span>);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">            <span class="string">"資料更新時呼叫，發生在虛擬 DOM 打補丁之前。這裡適合在更新之前訪問現有的 DOM，比如手動移除已添加的事件監聽器。"</span></span></span><br><span class="line">          );</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">        &#125;,</span><br><span class="line">        updated() &#123;</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"updated -&gt; updated"</span>);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">            <span class="string">"由於資料更改導致的虛擬 DOM 重新渲染和打補丁，在這之後會呼叫該鉤子。當這個鉤子被呼叫時，組件 DOM 已經更新，所以你現在可以執行依賴於 DOM 的操作。然而在大多數情況下，你應該避免在此期間更改狀態。如果要相應狀態改變，通常最好使用計算屬性或 watcher 取而代之。"</span></span></span><br><span class="line">          );</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">        &#125;,</span><br><span class="line">        beforeDestroy() &#123;</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"beforeDestroy -&gt; beforeDestroy"</span>);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"實例銷毀之前呼叫。在這一步，實例仍然完全可用。"</span>);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">        &#125;,</span><br><span class="line">        destroyed() &#123;</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"destroyed -&gt; destroyed"</span>, destroyed);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(</span></span><br><span class="line"><span class="actionscript">            <span class="string">"實例銷毀後呼叫。該鉤子被呼叫後，對應 Vue 實例的所有指令都被解綁，所有的事件監聽器被移除，所有的子實例也都被銷毀。"</span></span></span><br><span class="line">          );</span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"$el"</span>, <span class="keyword">this</span>.$el, <span class="string">"$data"</span>, <span class="keyword">this</span>.$data);</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cn.vuejs.org/images/lifecycle.png" alt="Vue%20instance%20ec8d6e67b59e4767ac372188e1417cdd/Untitled.png"></p></div></article></div></main><footer><div class="paginator"><a class="next" href="../YDKJS-%E4%BB%80%E9%BA%BC%E6%98%AF%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%9F/">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname="claymcleod",disqus_identifier="archives/2020/07/【Vue-初探】Vue-instance/",disqus_title="【 Vue 初探 】Vue instance",disqus_url="https://github.com/YUN-RU-TSENG/archives/2020/07/【Vue-初探】Vue-instance/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script><div class="copyright"><p>© 2020 ruru-tseng, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/claymcleod/hexo-theme-hermes" target="_blank">hexo-theme-hermes</a>.</p><p>Logo made by <a href="https://www.flaticon.com/authors/freepik" target="_blank" rel="noopener">Freepik</a> from <a href="https://flaticon.com" target="_blank" rel="noopener">www.flaticon.com</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>
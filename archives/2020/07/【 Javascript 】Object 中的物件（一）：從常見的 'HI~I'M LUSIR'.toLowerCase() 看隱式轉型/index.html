<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>【 YDKJS 】Object · Ruru-Front-End-Blog</title><meta name="description" content="【 YDKJS 】Object - [object Object]"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../favicons.jpg"><link rel="stylesheet" href="../../../../css/hermes.css"><link rel="search" type="application/opensearchdescription+xml" href="https://github.com/YUN-RU-TSENG/atom.xml" title="Ruru-Front-End-Blog"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="atom.xml" title="Ruru-Front-End-Blog" type="application/atom+xml"></head><body><div class="wrap"><header><a class="logo-link" href="../../../../index.html"><img src="../../../../favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="../../../../index.html" target="_self">BLOG</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../../https:/github.com/YUN-RU-TSENG" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../" target="_self">ARCHIVE</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../../https:/mail.google.com/mail/u/0/#inbox?compose=CllgCJTJnslxNqjBDkxGtdSVcGzcSZCczzVSQlprTXfFvBvLQZcwtWnCKxDchvrXJXKtWlzJLtL" target="_blank">FEED</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">【 YDKJS 】Object</h1><div class="post-info">Jul 16, 2020</div><div class="post-content"><h4 id="🎙🎙🎙-nbsp-nbsp-閱讀須知"><a href="#🎙🎙🎙-nbsp-nbsp-閱讀須知" class="headerlink" title="🎙🎙🎙 &nbsp; &nbsp; 閱讀須知"></a>🎙🎙🎙 &nbsp; &nbsp; 閱讀須知</h4><p>本文為筆者閱讀 <strong>You Don’t Know JavaScript</strong> 系列時的學習筆記，有鑒於日益嚴重的健忘問題，也沒有錢可以買銀杏護體，便開始了 <del>大抄</del> 筆記整理的行動 🏃，主要會對書中內容進行心得整理、紀錄一些當下遇到的神秘問題。歡迎一起討論交流，有任何錯誤也請各位大大不吝鞭笞，小菜雞不慎感激 🙇。</p><p><a href="https://www.animatedimages.org/cat-frogs-198.htm" target="_blank" rel="noopener"><img src="https://www.animatedimages.org/data/media/198/animated-frog-image-0204.gif" border="0" alt="animated-frog-image-0204"></a></p><hr><h2 id="物件的生成"><a href="#物件的生成" class="headerlink" title="物件的生成"></a>物件的生成</h2><p>Javascript 物件可以透過兩種方式生成：</p><ol><li>字面值</li><li>建構函式</li></ol><p>以上兩種方法有兩點明顯的差異：執行速度、設定物件屬性的方式。</p><h4 id="差異一：執行速度"><a href="#差異一：執行速度" class="headerlink" title="差異一：執行速度"></a>差異一：執行速度</h4><p>根據 ECMA 5 的描述使用字面值生成物件以及 new Object() 生成物件是相同的</p><blockquote><p>Let array be the result of creating a new object as if by the expression new Array() where Array is the standard built-in constructor with that name.</p></blockquote><p>不過這篇 <a href="https://stackoverflow.com/questions/7375120/why-is-arr-faster-than-arr-new-array" target="_blank" rel="noopener">為什麼 arr = [] 比 arr = new Array 要快？</a> 文章的介紹（範例是 Array），兩者在編譯上的結果會發現，比起 [] 生成物件， new Object 要經過確認 new 並且查找 Array 的過程，以這點來說建構函式花費的時間更多。</p><p>看到編譯結果</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[]: ARRAY_INIT</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>: NEW, IDENTIFIER</span><br></pre></td></tr></table></figure><p>兩者編譯會如何執行：<br><strong>[]</strong>：<code>ARRAY_INIT</code> 初始化陣列<br><strong>new Array</strong>: <code>new</code> 先解析 <code>new</code> 透過 <code>IDENTIFIER</code> 了解要建構物件， 由於遇到了 <code>IDENTIFIER</code> 所以要查詢範圍鍊 …。</p><p>得知 new Array() 顯然要進行更多的步驟，於是會花費更多的時間。</p><p>了解了原因後，我再次按照該提問範例測試了兩者的差異，使用迴圈創造多個物件，分別使用 <code>{}</code> 以及 <code>new Object()</code> 配合 <code>console.timeEnd()</code> 測試，如下方的程式碼：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.time(<span class="string">'using[]'</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">20000000</span>; i++)&#123;<span class="keyword">var</span> arr = []&#125;;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'using[]'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'using new'</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">20000000</span>; i++)&#123;<span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>()&#125;;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'using new'</span>)</span><br></pre></td></tr></table></figure><p>結果多次測試下，可以看見字面值方法始終大於 <code>new Object()</code>，在速率上更快：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">using []: 524.794ms</span><br><span class="line">using new: 734.315ms</span><br></pre></td></tr></table></figure><p>但是目前若是迴圈生成的物件較少，結果差異並不明顯（迴圈太少，有時 new 會更快），有鑒於這篇文章有些時間，有可能是瀏覽器產生了一些優化，以及關於編譯部分，等待之後再深入研究。</p><blockquote><p>生成 byteCoode 方法： <code>node --print-bytecode xxx.js &gt; result.txt</code> 可以生成 bytecode 到特定 txt 中。等待研究 bytecode 再回來填坑。</p></blockquote><p>等待研究的資料</p><ol><li><a href="https://github.com/aszx87410/blog/issues/54">從 V8 bytecode 看 let 與 var 的效能問題</a></li><li><a href="https://medium.com/dailyjs/understanding-v8s-bytecode-317d46c94775" target="_blank" rel="noopener">Understanding V8’s Bytecode</a></li></ol><h4 id="差異二：設定物件屬性的方式"><a href="#差異二：設定物件屬性的方式" class="headerlink" title="差異二：設定物件屬性的方式"></a>差異二：設定物件屬性的方式</h4><p>字面值設定屬性可以清晰的建立物件結構，並且一次新增多個屬性。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ticket = &#123;</span><br><span class="line">    name: <span class="string">'Movie'</span>,</span><br><span class="line">    price: <span class="number">20000</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="danger">這裡的 `price` 後方加上的 `,` 稱為尾隨逗號 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Trailing_commas" target="_blank" rel="noopener">Trailing commas</a>，便於我們添加、刪除和移動屬性。所以要記得添加呦！☘</div><p>但透過建構式，屬性要生成後一個一個添加</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ticket = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一次新增一個</span></span><br><span class="line">ticket.name = <span class="string">'Movie'</span>;</span><br><span class="line"><span class="comment">// 一次新增一個</span></span><br><span class="line">ticket.price = <span class="number">20000</span></span><br></pre></td></tr></table></figure><p>鑑於方便性，在速率、初始設定多個數值時更為方便等優點，字面值總是為使用上的優先考量。</p><h2 id="物件屬性"><a href="#物件屬性" class="headerlink" title="物件屬性"></a>物件屬性</h2><p>物件是屬性（property）的集合，每個屬性都是一個（key/value）對，可以儲存 8 種數據類型（ 7 種基本型別 ）</p><p>string<br>number<br>boolean<br>null<br>undefined<br>BigInt : 大於 2 的 23 次方的數字，很大的數字。<br>Symbol</p><hr><p>object</p><p>其中每個屬性可以為命名數據屬性、命名訪問屬性、內部屬性（三者稍後說明），現在只要先記得這件事即可。</p><p>像是 function 物件不同於其他物件，它具有 [[call]] 屬性，內部屬性通常是為了規範定義、語言實行而存在的。</p><div class="danger">null 是基本型別為 Object 是設計上的失誤，細節可以參考 [“typeof null” 的歷史](https://2ality.com/2013/10/typeof-null.html) 介紹，雖然目前 TC39 積極想處理，但是目前仍為錯誤，我們可以看到 `typeof null = "object"`。</div><h4 id="神秘的小題目"><a href="#神秘的小題目" class="headerlink" title="神秘的小題目"></a>神秘的小題目</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;<span class="attr">age</span>: <span class="number">20</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="built_in">Object</span> (a);</span><br><span class="line"><span class="built_in">console</span>.log (a === b)</span><br></pre></td></tr></table></figure><p>答案是 <code>true</code>，解答：<a href="https://www.zhihu.com/question/285068799/answer/1323222019" target="_blank" rel="noopener">這裏</a></p><h2 id="內建對象"><a href="#內建對象" class="headerlink" title="內建對象"></a>內建對象</h2></div></article></div></main><footer><div class="paginator"><a class="next" href="../%E3%80%90Vue-%E5%88%9D%E6%8E%A2%E3%80%91Vue-instance/">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'claymcleod';
var disqus_identifier = 'archives/2020/07/【 Javascript 】Object 中的物件（一）：從常見的 'HI~I'M LUSIR'.toLowerCase() 看隱式轉型/';
var disqus_title = '【 YDKJS 】Object';
var disqus_url = 'https://github.com/YUN-RU-TSENG/archives/2020/07/【 Javascript 】Object 中的物件（一）：從常見的 'HI~I'M LUSIR'.toLowerCase() 看隱式轉型/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script><div class="copyright"><p>© 2020 ruru-tseng, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/claymcleod/hexo-theme-hermes" target="_blank">hexo-theme-hermes</a>.</p><p>Logo made by <a href="https://www.flaticon.com/authors/freepik" target="_blank" rel="noopener">Freepik</a> from <a href="https://flaticon.com" target="_blank" rel="noopener">www.flaticon.com</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>ã€ YDKJS ã€‘Object Â· Ruru-Front-End-Blog</title><meta name="description" content="ã€ YDKJS ã€‘Object - [object Object]"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../favicons.jpg"><link rel="stylesheet" href="../../../../css/hermes.css"><link rel="search" type="application/opensearchdescription+xml" href="https://github.com/YUN-RU-TSENG/atom.xml" title="Ruru-Front-End-Blog"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="atom.xml" title="Ruru-Front-End-Blog" type="application/atom+xml"></head><body><div class="wrap"><header><a class="logo-link" href="../../../../index.html"><img src="../../../../favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="../../../../index.html" target="_self">BLOG</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../../https:/github.com/YUN-RU-TSENG" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../" target="_self">ARCHIVE</a></li><li class="nav-list-item"><a class="nav-list-link" href="../../../../https:/mail.google.com/mail/u/0/#inbox?compose=CllgCJTJnslxNqjBDkxGtdSVcGzcSZCczzVSQlprTXfFvBvLQZcwtWnCKxDchvrXJXKtWlzJLtL" target="_blank">FEED</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ã€ YDKJS ã€‘Object</h1><div class="post-info">Jul 16, 2020</div><div class="post-content"><h4 id="ğŸ™ğŸ™ğŸ™-nbsp-nbsp-é–±è®€é ˆçŸ¥"><a href="#ğŸ™ğŸ™ğŸ™-nbsp-nbsp-é–±è®€é ˆçŸ¥" class="headerlink" title="ğŸ™ğŸ™ğŸ™ &nbsp; &nbsp; é–±è®€é ˆçŸ¥"></a>ğŸ™ğŸ™ğŸ™ &nbsp; &nbsp; é–±è®€é ˆçŸ¥</h4><p>æœ¬æ–‡ç‚ºç­†è€…é–±è®€ <strong>You Donâ€™t Know JavaScript</strong> ç³»åˆ—æ™‚çš„å­¸ç¿’ç­†è¨˜ï¼Œæœ‰é‘’æ–¼æ—¥ç›Šåš´é‡çš„å¥å¿˜å•é¡Œï¼Œä¹Ÿæ²’æœ‰éŒ¢å¯ä»¥è²·éŠ€æè­·é«”ï¼Œä¾¿é–‹å§‹äº† <del>å¤§æŠ„</del> ç­†è¨˜æ•´ç†çš„è¡Œå‹• ğŸƒï¼Œä¸»è¦æœƒå°æ›¸ä¸­å…§å®¹é€²è¡Œå¿ƒå¾—æ•´ç†ã€ç´€éŒ„ä¸€äº›ç•¶ä¸‹é‡åˆ°çš„ç¥ç§˜å•é¡Œã€‚æ­¡è¿ä¸€èµ·è¨è«–äº¤æµï¼Œæœ‰ä»»ä½•éŒ¯èª¤ä¹Ÿè«‹å„ä½å¤§å¤§ä¸åé­ç¬ï¼Œå°èœé›ä¸æ…æ„Ÿæ¿€ ğŸ™‡ã€‚</p><p><a href="https://www.animatedimages.org/cat-frogs-198.htm" target="_blank" rel="noopener"><img src="https://www.animatedimages.org/data/media/198/animated-frog-image-0204.gif" border="0" alt="animated-frog-image-0204"></a></p><hr><h2 id="ç‰©ä»¶çš„ç”Ÿæˆ"><a href="#ç‰©ä»¶çš„ç”Ÿæˆ" class="headerlink" title="ç‰©ä»¶çš„ç”Ÿæˆ"></a>ç‰©ä»¶çš„ç”Ÿæˆ</h2><p>Javascript ç‰©ä»¶å¯ä»¥é€éå…©ç¨®æ–¹å¼ç”Ÿæˆï¼š</p><ol><li>å­—é¢å€¼</li><li>å»ºæ§‹å‡½å¼</li></ol><p>ä»¥ä¸Šå…©ç¨®æ–¹æ³•æœ‰å…©é»æ˜é¡¯çš„å·®ç•°ï¼šåŸ·è¡Œé€Ÿåº¦ã€è¨­å®šç‰©ä»¶å±¬æ€§çš„æ–¹å¼ã€‚</p><h4 id="å·®ç•°ä¸€ï¼šåŸ·è¡Œé€Ÿåº¦"><a href="#å·®ç•°ä¸€ï¼šåŸ·è¡Œé€Ÿåº¦" class="headerlink" title="å·®ç•°ä¸€ï¼šåŸ·è¡Œé€Ÿåº¦"></a>å·®ç•°ä¸€ï¼šåŸ·è¡Œé€Ÿåº¦</h4><p>æ ¹æ“š ECMA 5 çš„æè¿°ä½¿ç”¨å­—é¢å€¼ç”Ÿæˆç‰©ä»¶ä»¥åŠ new Object() ç”Ÿæˆç‰©ä»¶æ˜¯ç›¸åŒçš„</p><blockquote><p>Let array be the result of creating a new object as if by the expression new Array() where Array is the standard built-in constructor with that name.</p></blockquote><p>ä¸éé€™ç¯‡ <a href="https://stackoverflow.com/questions/7375120/why-is-arr-faster-than-arr-new-array" target="_blank" rel="noopener">ç‚ºä»€éº¼ arr = [] æ¯” arr = new Array è¦å¿«ï¼Ÿ</a> æ–‡ç« çš„ä»‹ç´¹ï¼ˆç¯„ä¾‹æ˜¯ Arrayï¼‰ï¼Œå…©è€…åœ¨ç·¨è­¯ä¸Šçš„çµæœæœƒç™¼ç¾ï¼Œæ¯”èµ· [] ç”Ÿæˆç‰©ä»¶ï¼Œ new Object è¦ç¶“éç¢ºèª new ä¸¦ä¸”æŸ¥æ‰¾ Array çš„éç¨‹ï¼Œä»¥é€™é»ä¾†èªªå»ºæ§‹å‡½å¼èŠ±è²»çš„æ™‚é–“æ›´å¤šã€‚</p><p>çœ‹åˆ°ç·¨è­¯çµæœ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[]: ARRAY_INIT</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>: NEW, IDENTIFIER</span><br></pre></td></tr></table></figure><p>å…©è€…ç·¨è­¯æœƒå¦‚ä½•åŸ·è¡Œï¼š</p><p><strong>[]</strong>ï¼š<code>ARRAY_INIT</code> åˆå§‹åŒ–é™£åˆ—<br><strong>new Array</strong>: <code>new</code> å…ˆè§£æ <code>new</code> é€é <code>IDENTIFIER</code> äº†è§£è¦å»ºæ§‹ç‰©ä»¶ï¼Œ ç”±æ–¼é‡åˆ°äº† <code>IDENTIFIER</code> æ‰€ä»¥è¦æŸ¥è©¢ç¯„åœéŠ â€¦ã€‚</p><p>å¾—çŸ¥ new Array() é¡¯ç„¶è¦é€²è¡Œæ›´å¤šçš„æ­¥é©Ÿï¼Œæ–¼æ˜¯æœƒèŠ±è²»æ›´å¤šçš„æ™‚é–“ã€‚</p><p>äº†è§£äº†åŸå› å¾Œï¼Œæˆ‘å†æ¬¡æŒ‰ç…§è©²æå•ç¯„ä¾‹æ¸¬è©¦äº†å…©è€…çš„å·®ç•°ï¼Œä½¿ç”¨è¿´åœˆå‰µé€ å¤šå€‹ç‰©ä»¶ï¼Œåˆ†åˆ¥ä½¿ç”¨ <code>{}</code> ä»¥åŠ <code>new Object()</code> é…åˆ <code>console.timeEnd()</code> æ¸¬è©¦ï¼Œå¦‚ä¸‹æ–¹çš„ç¨‹å¼ç¢¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.time(<span class="string">"using[]"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">20000000</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> arr = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"using[]"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">"using new"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">20000000</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"using new"</span>);</span><br></pre></td></tr></table></figure><p>çµæœå¤šæ¬¡æ¸¬è©¦ä¸‹ï¼Œå¯ä»¥çœ‹è¦‹å­—é¢å€¼æ–¹æ³•å§‹çµ‚å¤§æ–¼ <code>new Object()</code>ï¼Œåœ¨é€Ÿç‡ä¸Šæ›´å¿«ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">using []: 524.794ms</span><br><span class="line">using new: 734.315ms</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ç›®å‰è‹¥æ˜¯è¿´åœˆç”Ÿæˆçš„ç‰©ä»¶è¼ƒå°‘ï¼Œçµæœå·®ç•°ä¸¦ä¸æ˜é¡¯ï¼ˆè¿´åœˆå¤ªå°‘ï¼Œæœ‰æ™‚ new æœƒæ›´å¿«ï¼‰ï¼Œæœ‰é‘’æ–¼é€™ç¯‡æ–‡ç« æœ‰äº›æ™‚é–“ï¼Œæœ‰å¯èƒ½æ˜¯ç€è¦½å™¨ç”¢ç”Ÿäº†ä¸€äº›å„ªåŒ–ï¼Œä»¥åŠé—œæ–¼ç·¨è­¯éƒ¨åˆ†ï¼Œç­‰å¾…ä¹‹å¾Œå†æ·±å…¥ç ”ç©¶ã€‚</p><blockquote><p>ç”Ÿæˆ byteCoode æ–¹æ³•ï¼š <code>node --print-bytecode xxx.js &gt; result.txt</code> å¯ä»¥ç”Ÿæˆ bytecode åˆ°ç‰¹å®š txt ä¸­ã€‚ç­‰å¾…ç ”ç©¶ bytecode å†å›ä¾†å¡«å‘ã€‚</p></blockquote><p>ç­‰å¾…ç ”ç©¶çš„è³‡æ–™</p><ol><li><a href="https://github.com/aszx87410/blog/issues/54">å¾ V8 bytecode çœ‹ let èˆ‡ var çš„æ•ˆèƒ½å•é¡Œ</a></li><li><a href="https://medium.com/dailyjs/understanding-v8s-bytecode-317d46c94775" target="_blank" rel="noopener">Understanding V8â€™s Bytecode</a></li></ol><h4 id="å·®ç•°äºŒï¼šè¨­å®šç‰©ä»¶å±¬æ€§çš„æ–¹å¼"><a href="#å·®ç•°äºŒï¼šè¨­å®šç‰©ä»¶å±¬æ€§çš„æ–¹å¼" class="headerlink" title="å·®ç•°äºŒï¼šè¨­å®šç‰©ä»¶å±¬æ€§çš„æ–¹å¼"></a>å·®ç•°äºŒï¼šè¨­å®šç‰©ä»¶å±¬æ€§çš„æ–¹å¼</h4><p>å­—é¢å€¼è¨­å®šå±¬æ€§å¯ä»¥æ¸…æ™°çš„å»ºç«‹ç‰©ä»¶çµæ§‹ï¼Œä¸¦ä¸”ä¸€æ¬¡æ–°å¢å¤šå€‹å±¬æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ticket = &#123;</span><br><span class="line">  name: <span class="string">"Movie"</span>,</span><br><span class="line">  price: <span class="number">20000</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><div class="danger">é€™è£¡çš„ `price` å¾Œæ–¹åŠ ä¸Šçš„ `,` ç¨±ç‚ºå°¾éš¨é€—è™Ÿ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Trailing_commas" target="_blank" rel="noopener">Trailing commas</a>ï¼Œä¾¿æ–¼æˆ‘å€‘æ·»åŠ ã€åˆªé™¤å’Œç§»å‹•å±¬æ€§ã€‚æ‰€ä»¥è¦è¨˜å¾—æ·»åŠ å‘¦ï¼â˜˜</div><p>ä½†é€éå»ºæ§‹å¼ï¼Œå±¬æ€§è¦ç”Ÿæˆå¾Œä¸€å€‹ä¸€å€‹æ·»åŠ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ticket = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€æ¬¡æ–°å¢ä¸€å€‹</span></span><br><span class="line">ticket.name = <span class="string">"Movie"</span>;</span><br><span class="line"><span class="comment">// ä¸€æ¬¡æ–°å¢ä¸€å€‹</span></span><br><span class="line">ticket.price = <span class="number">20000</span>;</span><br></pre></td></tr></table></figure><p>é‘‘æ–¼æ–¹ä¾¿æ€§ï¼Œåœ¨é€Ÿç‡ã€åˆå§‹è¨­å®šå¤šå€‹æ•¸å€¼æ™‚æ›´ç‚ºæ–¹ä¾¿ç­‰å„ªé»ï¼Œå­—é¢å€¼ç¸½æ˜¯ç‚ºä½¿ç”¨ä¸Šçš„å„ªå…ˆè€ƒé‡ã€‚</p><h2 id="ç‰©ä»¶å±¬æ€§"><a href="#ç‰©ä»¶å±¬æ€§" class="headerlink" title="ç‰©ä»¶å±¬æ€§"></a>ç‰©ä»¶å±¬æ€§</h2><p>ç‰©ä»¶æ˜¯å±¬æ€§ï¼ˆpropertyï¼‰çš„é›†åˆï¼Œæ¯å€‹å±¬æ€§éƒ½æ˜¯ä¸€å€‹ï¼ˆkey/valueï¼‰å°ï¼Œå¯ä»¥å„²å­˜ 8 ç¨®æ•¸æ“šé¡å‹ï¼ˆ 7 ç¨®åŸºæœ¬å‹åˆ¥ ï¼‰</p><p>string<br>number<br>boolean<br>null<br>undefined<br>BigInt<br>Symbol<br>object</p><p>å…¶ä¸­æ¯å€‹å±¬æ€§å¯ä»¥ç‚ºå‘½åæ•¸æ“šå±¬æ€§ã€å‘½åè¨ªå•å±¬æ€§ã€å…§éƒ¨å±¬æ€§ï¼ˆä¸‰è€…ç¨å¾Œèªªæ˜ï¼‰ï¼Œç¾åœ¨åªè¦å…ˆè¨˜å¾—é€™ä»¶äº‹å³å¯ã€‚</p><p>function ç‰©ä»¶ä¸åŒæ–¼å…¶ä»–ç‰©ä»¶ï¼Œå®ƒå…·æœ‰ [[call]] å±¬æ€§ï¼Œå…§éƒ¨å±¬æ€§é€šå¸¸æ˜¯ç‚ºäº†è¦ç¯„å®šç¾©ã€èªè¨€å¯¦è¡Œè€Œå­˜åœ¨çš„ã€‚</p><div class="danger">null æ˜¯åŸºæœ¬å‹åˆ¥ç‚º Object æ˜¯è¨­è¨ˆä¸Šçš„å¤±èª¤ï¼Œç´°ç¯€å¯ä»¥åƒè€ƒ [â€œtypeof nullâ€ çš„æ­·å²](https://2ality.com/2013/10/typeof-null.html) ä»‹ç´¹ï¼Œé›–ç„¶ç›®å‰ TC39 ç©æ¥µæƒ³è™•ç†ï¼Œä½†æ˜¯ç›®å‰ä»ç‚ºéŒ¯èª¤ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ° `typeof null = "object"`ã€‚</div><h4 id="ğŸ¿-ç¥ç§˜çš„å°é¡Œç›®"><a href="#ğŸ¿-ç¥ç§˜çš„å°é¡Œç›®" class="headerlink" title="ğŸ¿ ç¥ç§˜çš„å°é¡Œç›®"></a>ğŸ¿ ç¥ç§˜çš„å°é¡Œç›®</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123; <span class="attr">age</span>: <span class="number">20</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="built_in">Object</span>(a);</span><br><span class="line"><span class="built_in">console</span>.log(a === b);</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆæ˜¯ <code>true</code>ï¼Œè§£ç­”ï¼š<a href="https://www.zhihu.com/question/285068799/answer/1323222019" target="_blank" rel="noopener">é€™è£</a></p><h2 id="å…§ç½®ç‰©ä»¶"><a href="#å…§ç½®ç‰©ä»¶" class="headerlink" title="å…§ç½®ç‰©ä»¶"></a>å…§ç½®ç‰©ä»¶</h2><p>Javascript ä¸­ç”± ECMA æ‰€å®šç¾©ï¼Œåœ¨é–‹å§‹é€²è¡Œæ™‚ ECMAScript ç¨‹å¼é–‹å§‹é‹è¡Œæ™‚å­˜åœ¨ï¼Œä»–å€‘ç‚ºç‰©ä»¶çš„å­é¡åˆ¥ï¼Œå¸¸è¦‹çš„æœ‰ï¼ˆæ›´å¤šå¯ä»¥æŸ¥è¦‹ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects" target="_blank" rel="noopener">MDN</a>ï¼‰</p><p>String<br>Number<br>Boolean<br>Object<br>Function<br>Array<br>Date<br>RegExp<br>Error</p><p>ä¸Šè¿°çš†ç‚ºå…·æœ‰ [[call]] å…§éƒ¨å±¬æ€§çš„å»ºæ§‹å‡½å¼ï¼Œé€™äº›å‡½å¼çš„ prototype æœ‰è¨±å¤šé è¨­çš„æ–¹æ³•å±¬æ€§æ˜¯ç”±è¦ç¯„é å…ˆåˆ¶å®šï¼Œé€éå»ºæ§‹å¼ç”Ÿæˆçš„ç‰©ä»¶å¯ä»¥ä½¿ç”¨é€™äº›æ–¹æ³•ã€‚</p><p>æˆ‘å€‘å¯ä»¥ä½¿ç”¨åŸºæœ¬å‹åˆ¥ï¼Œä½¿ç”¨èˆ‡ä¹‹å°æ‡‰åç¨±çš„å»ºæ§‹å¼çš„ prototype ä¸­çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">"Hello"</span>;</span><br><span class="line">str.toUpperCase();</span><br></pre></td></tr></table></figure><p>ä¹‹æ‰€ä»¥å¯ä»¥é€™æ¨£è™•ç†ï¼Œæ˜¯ç”±æ–¼ Javascript çš„éš±å¼è½‰å‹ï¼ˆcoercionsï¼‰ä»¥åŠåŸå‹ç¹¼æ‰¿ï¼Œç”±è¦ç¯„ ECMA ä¸­æˆ‘å€‘å¯ä»¥çªºè¦‹ä¸€äº›ç·£ç”±ï¼š</p><h4 id="12-3-2Property-Accessors"><a href="#12-3-2Property-Accessors" class="headerlink" title="12.3.2Property Accessors"></a>12.3.2Property Accessors</h4><p><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-property-accessors-runtime-semantics-evaluation" target="_blank" rel="noopener">12.3.2.1Runtime Semantics: Evaluation</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> Let baseReference be the result <span class="keyword">of</span> evaluating MemberExpression.</span><br><span class="line"><span class="number">2.</span> Let baseValue be GetValue(baseReference).</span><br><span class="line"><span class="number">3.</span> ReturnIfAbrupt(baseValue).</span><br><span class="line"><span class="number">4.</span> Let propertyNameReference be the result <span class="keyword">of</span> evaluating Expression.</span><br><span class="line"><span class="number">5.</span> Let propertyNameValue be GetValue(propertyNameReference).</span><br><span class="line"><span class="number">6.</span> ReturnIfAbrupt(propertyNameValue).</span><br><span class="line"><span class="number">7.</span> Let bv be RequireObjectCoercible(baseValue).</span><br><span class="line"><span class="number">8.</span> ReturnIfAbrupt(bv).</span><br><span class="line"><span class="number">9.</span> Let propertyKey be ToPropertyKey(propertyNameValue).</span><br><span class="line"><span class="number">10.</span> ReturnIfAbrupt(propertyKey).</span><br><span class="line"><span class="number">11.</span> If the code matched by the syntactic production that is being evaluated is strict mode code, <span class="keyword">let</span> strict be <span class="literal">true</span>, <span class="keyword">else</span> <span class="keyword">let</span> strict be <span class="literal">false</span>.</span><br><span class="line"><span class="number">12.</span> Return a value <span class="keyword">of</span> type Reference whose base value is bv and whose referenced name is propertyKey, and whose strict reference flag is strict.</span><br></pre></td></tr></table></figure><h4 id="6-2-3-1GetValue-V"><a href="#6-2-3-1GetValue-V" class="headerlink" title="6.2.3.1GetValue (V)"></a><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-getvalue" target="_blank" rel="noopener">6.2.3.1GetValue (V)</a></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. ReturnIfAbrupt(V).</span><br><span class="line">2. If Type(V) is not Reference, return V.</span><br><span class="line">3. Let base be GetBase(V).</span><br><span class="line">4. If IsUnresolvableReference(V), throw a ReferenceError exception.</span><br><span class="line">5. If IsPropertyReference(V), then</span><br><span class="line">  a. If HasPrimitiveBase(V) is true, then</span><br><span class="line">    i. Assert: In this case, base will never be null or undefined.</span><br><span class="line">    ii. Let base be ToObject(base).</span><br><span class="line">  b. Return base.[[Get]](GetReferencedName(V), GetThisValue(V)).</span><br><span class="line">6. Else base must be an Environment Record,</span><br><span class="line">  a. Return base.GetBindingValue(GetReferencedName(V), IsStrictReference(V)) (see 8.1.1).</span><br></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨ <code>getValue()</code> å…§éƒ¨æŠ½è±¡æ“ä½œæ™‚ï¼Œå¯è¦‹åˆ° <code>Let base be ToObject(base).</code> åœ¨é€™å€‹æ­¥é©Ÿæ™‚ç”¢ç”Ÿäº†è½‰å‹ï¼ˆåŸºæœ¬å‹åˆ¥ç‚ºæ­¤ç‰©ä»¶çš„ <code>[[class]]</code>ï¼‰ï¼Œé€éæ­¤è‡¨æ™‚ç‰©ä»¶ï¼Œé…åˆ <code>[[GET]]</code> çš„è¡Œç‚ºï¼Œè½‰åŒ–åŸºæœ¬å‹åˆ¥ç‚ºç‰©ä»¶ï¼Œé€²ä¸€æ­¥é€éè©²ç‰©ä»¶ï¼Œåœ¨ä¸Šé ­èª¿ç”¨åŸå‹ä¸Šçš„æ–¹æ³•ï¼š</p><p>ä¸‹æ–¹æè¿°äº† <code>[[Get]]</code> è¡Œç‚ºä¸­æ‰¾å°‹åŸå‹ä¸­å±¬æ€§çš„è¡Œç‚ºï¼š</p><h4 id="9-1-8-Get-P-Receiver"><a href="#9-1-8-Get-P-Receiver" class="headerlink" title="9.1.8 [[Get]] (P, Receiver)"></a><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver" target="_blank" rel="noopener">9.1.8 <code>[[Get]]</code> (P, Receiver)</a></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1. Assert: IsPropertyKey(P) is true.</span><br><span class="line">2. Let desc be O.[[GetOwnProperty]](P).</span><br><span class="line">3. ReturnIfAbrupt(desc).</span><br><span class="line">4. If desc is undefined, then</span><br><span class="line">  a. Let parent be O.[[GetPrototypeOf]]().</span><br><span class="line">  b. ReturnIfAbrupt(parent).</span><br><span class="line">  c. If parent is null, return undefined.</span><br><span class="line">  d. Return parent.[[Get]](P, Receiver).</span><br><span class="line">5. If IsDataDescriptor(desc) is true, return desc.[[Value]].</span><br><span class="line">6. Otherwise, IsAccessorDescriptor(desc) must be true so, let getter be desc.[[Get]].</span><br><span class="line">7. If getter is undefined, return undefined.</span><br><span class="line">8. Return Call(getter, Receiver).</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹è¦‹ç•¶åœ¨å…§éƒ¨æ‰¾ä¸åˆ°è©²å±¬æ€§æ™‚ï¼Œå°±æœƒèª¿ç”¨ <code>GetPrototypeOf</code> å¾€åŸå‹ä¸ŠæŸ¥æ‰¾ã€‚å°±çµè«–ä¸Šä¾†èªªï¼ŒåŸºæœ¬å‹åˆ¥å¯ä»¥ä½¿ç”¨ç›¸åŒåç¨±çš„å»ºæ§‹å¼ prototype ä¸­çš„æ–¹æ³•ï¼Œæ˜¯å¤šè™§äº†è½‰å‹ä»¥åŠåŸå‹ç¹¼æ‰¿ã€‚</p><div class="danger">ç›®å‰å°æ–¼èª¿ç”¨ a.b é€™ä»¶è¡Œç‚ºçš„ç†è§£ç‚º 12.3.2.1 è¡Œç‚ºï¼Œä¸¦åœ¨éç¨‹ä¸­å¼•ç”¨äº† reference type ä¸‹çš„ getValue() ï¼Œä¸éæŸ¥è©¢äº†è¨±å¤šè³‡æ–™ä»ç„¶æœ‰é»è¿·æƒ‘ï¼Œæ‰€ä»¥ç›®å‰ä»¥ä¸Šçš„é †åºä»ç„¶æ˜¯ç›®å‰çš„è§£è®€ï¼Œæœ‰å¯èƒ½æœ‰èª¤ï¼Œé€™éƒ¨åˆ†ç­‰å¾…ç ”ç©¶æ·±å…¥ã€‚ å¦å¤–ï¼Œæˆ‘å€‘å¹³æ™‚ä½¿ç”¨çš„ç‰©ä»¶ï¼Œéƒ½æ˜¯å»ºæ§‹å¼ç”Ÿæˆï¼Œå¯ä»¥ç”Ÿæˆæ²’æœ‰åŸå‹çš„å—ï¼Ÿå¦‚è‹¥å¯ä»¥ï¼Œå®šç¾©ç‚ºä½•ï¼Ÿ</div><p>ç­‰å¾…ç ”ç©¶è³‡æ–™<br><a href="chrome-extension://klbibkeccnjlkjkiokjodocebajanakg/suspended.html#ttl=JavaScript%E5%9F%BA%E5%85%83%E7%9A%84%E7%A7%98%E5%AF%86%E7%94%9F%E6%B4%BB%E2%80%93%20JavaScript%EF%BC%8CJavaScript%E2%80%A6&pos=6017&uri=https://javascriptweblog.wordpress.com/2010/09/27/the-secret-life-of-javascript-primitives/">The Secret Life of JavaScript Primitives</a></p><hr><p>ä¸Šè¿°èªªå®Œäº†åŸºæœ¬å‹åˆ¥å¦‚ä½•é€éè½‰å‹ã€åŸå‹ä¾†ä½¿ç”¨å…§ç½®å°è±¡çš„å±¬æ€§ï¼Œä¸‹é¢ä¾†ä»‹ç´¹å¦‚ä½•é€é <code>Object.prototype.toString()</code> æ–¹æ³•æŸ¥çœ‹ç‰©ä»¶çš„å­é¡åˆ¥ <code>[[class]]</code></p><p><code>[[class]]</code> æ˜¯è¦ç¯„çš„å…§éƒ¨å±¬æ€§ï¼Œè¡¨ç¤ºè©²ç‰©ä»¶çš„å­é¡åˆ¥ï¼Œåªèƒ½å¤ é <code>Object.prototype.toString()</code> æŸ¥çœ‹ï¼Œä¸¦ä¸”èˆ‡ <code>Number.prototype.toString()</code>ã€<code>Boolean.prototype.toString()</code> ä¸åŒï¼Œ</p><h4 id="Object-prototype-toString"><a href="#Object-prototype-toString" class="headerlink" title="Object.prototype.toString()"></a><code>Object.prototype.toString()</code></h4><p>è¿”å› O çš„ç‰©ä»¶é¡å‹ typeï¼Œçµæœç‚º <code>[Object type]</code>ï¼Œå…¶ä¸­ type ç‚ºè¦ç¯„æ‰€å®šç¾©çš„ <code>[[class]]</code>ï¼ŒåŒ…å«ï¼š<code>String</code>ã€<code>Object</code>ã€<code>Null</code> ç­‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#125;.toString() <span class="comment">// [object object]</span></span><br></pre></td></tr></table></figure><p>è‹¥æ˜¯è¦å°å…¶ä»–å­é¡å‹çš„ç‰©ä»¶ä½¿ç”¨ï¼Œè¨˜å¾—ä½¿ç”¨ç¶å®š <code>this</code> çš„æ–¹å¼ï¼Œå› ç‚ºå…¶ä»–é¡åˆ¥å…§çš„ <code>toString</code> è·Ÿ <code>Object.prototype.toString()</code> çš„ä½œç”¨ä¸ç›¸åŒï¼Œè‹¥æ˜¯è¦å¾—åˆ°å…§éƒ¨å±¬æ€§ [[class]]ï¼Œéœ€ä½¿ç”¨ <code>Object.prototype.toString()</code>ï¼Œé€™ä¹Ÿæ˜¯ ECMA è¦ç¯„å®šç¾©çš„å”¯ä¸€å¯ä»¥å–å¾—å…§éƒ¨å±¬æ€§ <code>[[class]]</code> çš„æ–¹æ³•ã€‚</p><blockquote></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‹¥æ˜¯è¦å° Number å‹åˆ¥ä½¿ç”¨ï¼Œè¨˜å¾—ä½¿ç”¨ç¶å®šï¼Œå¦å‰‡æœƒä½¿ç”¨ Number.prototype.toString() ä»–ä¸æœƒä½¿ç”¨ Object.prototype.toString()</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> <span class="built_in">Number</span>()) <span class="comment">// [object Number]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>().toString <span class="comment">// "0"</span></span><br></pre></td></tr></table></figure><h4 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a><code>instanceof</code></h4><p>æŸ¥çœ‹ç‰©ä»¶åŸå‹éˆä¸­æ˜¯å¦æœ‰æŸå»ºæ§‹å¼çš„ <code>prototype</code>ï¼Œè¿”å› <code>Boolean</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'abc'</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">String</span>() <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="ğŸ¿-ç¥ç§˜çš„å°é¡Œç›®-1"><a href="#ğŸ¿-ç¥ç§˜çš„å°é¡Œç›®-1" class="headerlink" title="ğŸ¿ ç¥ç§˜çš„å°é¡Œç›®"></a>ğŸ¿ ç¥ç§˜çš„å°é¡Œç›®</h4><p>è«‹å• <code>o3 instanceof C</code> æ•¸å€¼ç‚ºå¤šå°‘ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// defining constructors</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">D</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o = <span class="keyword">new</span> C()</span><br><span class="line"></span><br><span class="line"><span class="comment">// true, because: Object.getPrototypeOf(o) === C.prototype</span></span><br><span class="line">o <span class="keyword">instanceof</span> C</span><br><span class="line"></span><br><span class="line"><span class="comment">// false, because D.prototype is nowhere in o's prototype chain</span></span><br><span class="line">o <span class="keyword">instanceof</span> D</span><br><span class="line"></span><br><span class="line">o <span class="keyword">instanceof</span> <span class="built_in">Object</span>           <span class="comment">// true, because:</span></span><br><span class="line">C.prototype <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">C.prototype = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> o2 = <span class="keyword">new</span> C()</span><br><span class="line"></span><br><span class="line">o2 <span class="keyword">instanceof</span> C  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// false, because C.prototype is nowhere in</span></span><br><span class="line"><span class="comment">// o's prototype chain anymore</span></span><br><span class="line">o <span class="keyword">instanceof</span> C</span><br><span class="line"></span><br><span class="line">D.prototype = <span class="keyword">new</span> C()  <span class="comment">// add C to [[Prototype]] linkage of D</span></span><br><span class="line"><span class="keyword">let</span> o3 = <span class="keyword">new</span> D()</span><br><span class="line">o3 <span class="keyword">instanceof</span> D        <span class="comment">// true</span></span><br><span class="line">o3 <span class="keyword">instanceof</span> C        <span class="comment">// ?</span></span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆæ˜¯ï¼š true</p><p>é€™é‚Šæœ‰å…©å€‹å¯ä»¥æ³¨æ„çš„é»ï¼Œä¸€å€‹æ˜¯ <code>o instanceof C</code> è½‰è®Šæˆ <code>false</code> çš„æƒ…æ³ï¼Œå¦ä¸€å€‹æ˜¯ä½¿ç”¨ <code>new c()</code> ä½œç‚º D çš„ <code>prototype</code>ï¼Œ<code>new D() instanceof C // true</code></p><p>å…ˆä¾†èªªç¬¬ä¸€é»ç‚ºä½•æœƒè½‰è®Šï¼š<br>ä¸€é–‹å§‹ï¼Œ<code>o instanceof C</code> ç‚ºæ­£ç¢ºï¼Œä½†æ˜¯å¾Œä¾† <code>prototype</code> è¢«é‡æ–°æŒ‡å‘äº† <code>{}</code>ï¼Œæ­¤æ™‚ <code>o</code> æŒ‡å‘èˆŠçš„ <code>prototype</code> ä½†æ˜¯å»ºæ§‹å¼ä¸­çš„ <code>prototype</code> å·²ç¶“æŒ‡å‘äº†æ–°çš„ç‰©ä»¶ï¼Œæ–¼æ˜¯ <code>o</code> çš„åŸå‹éˆä¸­æ²’æœ‰ç¹¼æ‰¿å»ºæ§‹å¼ä¸­è¢«é‡æ–°æŒ‡å‘çš„åŸå‹ï¼Œæ‰€ä»¥ <code>o instanceof C</code> è½‰è®Šæˆ <code>false</code></p><h4 id="çµè«–ï¼šå»ºæ§‹å¼ä¸­çš„-prototype-é‡æ–°æŒ‡å‘æ–°ç‰©ä»¶ï¼Œæœƒå°è‡´èˆŠæœ‰çš„å¯¦ä¾‹åŸå‹éŠä¸­æ²’æœ‰æŒ‡å‘æ­¤æ–°çš„ç‰©ä»¶ã€‚"><a href="#çµè«–ï¼šå»ºæ§‹å¼ä¸­çš„-prototype-é‡æ–°æŒ‡å‘æ–°ç‰©ä»¶ï¼Œæœƒå°è‡´èˆŠæœ‰çš„å¯¦ä¾‹åŸå‹éŠä¸­æ²’æœ‰æŒ‡å‘æ­¤æ–°çš„ç‰©ä»¶ã€‚" class="headerlink" title="çµè«–ï¼šå»ºæ§‹å¼ä¸­çš„ prototype é‡æ–°æŒ‡å‘æ–°ç‰©ä»¶ï¼Œæœƒå°è‡´èˆŠæœ‰çš„å¯¦ä¾‹åŸå‹éŠä¸­æ²’æœ‰æŒ‡å‘æ­¤æ–°çš„ç‰©ä»¶ã€‚"></a>çµè«–ï¼šå»ºæ§‹å¼ä¸­çš„ prototype é‡æ–°æŒ‡å‘æ–°ç‰©ä»¶ï¼Œæœƒå°è‡´èˆŠæœ‰çš„å¯¦ä¾‹åŸå‹éŠä¸­æ²’æœ‰æŒ‡å‘æ­¤æ–°çš„ç‰©ä»¶ã€‚</h4><p>ç¬¬äºŒé»ï¼š<br>è¨­å®š <code>D.prototype = new C()</code> æœƒä½¿å¾—ä½¿ç”¨ new D() ç”Ÿæˆçš„ç‰©ä»¶ä¸­ï¼ŒåŸå‹ç·´æœƒåŒ…å« C.prototypeï¼Œå› ç‚º D.prototype çš„ new C() çš„åŸå‹ç‚º C.prototypeï¼Œæ–¼æ˜¯ <code>o3 instanceof C // true</code></p><h2 id="å…§å®¹"><a href="#å…§å®¹" class="headerlink" title="å…§å®¹"></a>å…§å®¹</h2><p>ç‰©ä»¶å¯ä»¥ä½¿ç”¨å…©ä¸­æ–¹æ³•å–å€¼ï¼š</p><ol><li>Obj[expression] éµè¨ªå•</li><li>Obj.identifier å±¬æ€§è¨ªå•</li></ol><p>ç”±æ–¼éµè¨ªå•å…§ä½¿ç”¨çš„æ˜¯ expression æ‰€ä»¥æˆ‘å€‘å¯ä»¥åœ¨è£¡é¢ä½¿ç”¨è¨ˆç®—ç­‰æ–¹å¼ï¼Œå‹•æ…‹çš„çµ„ä»¶æ•¸å€¼ã€‚</p></div></article></div></main><footer><div class="paginator"><a class="next" href="../%E3%80%90Vue-%E5%88%9D%E6%8E%A2%E3%80%91Vue-instance/">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'claymcleod';
var disqus_identifier = 'archives/2020/07/ã€ Javascript ã€‘Object ä¸­çš„ç‰©ä»¶ï¼ˆä¸€ï¼‰ï¼šå¾å¸¸è¦‹çš„ 'HI~I'M LUSIR'.toLowerCase() çœ‹éš±å¼è½‰å‹/';
var disqus_title = 'ã€ YDKJS ã€‘Object';
var disqus_url = 'https://github.com/YUN-RU-TSENG/archives/2020/07/ã€ Javascript ã€‘Object ä¸­çš„ç‰©ä»¶ï¼ˆä¸€ï¼‰ï¼šå¾å¸¸è¦‹çš„ 'HI~I'M LUSIR'.toLowerCase() çœ‹éš±å¼è½‰å‹/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script><div class="copyright"><p>Â© 2020 ruru-tseng, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/claymcleod/hexo-theme-hermes" target="_blank">hexo-theme-hermes</a>.</p><p>Logo made by <a href="https://www.flaticon.com/authors/freepik" target="_blank" rel="noopener">Freepik</a> from <a href="https://flaticon.com" target="_blank" rel="noopener">www.flaticon.com</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>